@model DataLayer.Model.Commentaires
@using Form112.Infrastructure
@using System.Text

<div class="comment-container col-sm-10" id="@Model.IdCommentaire">
    @{
        StringBuilder sb = new StringBuilder();
        int count = 0;
      }
    @AfficherReponsesCommentaire(Model, sb, count)
    @Html.Raw(sb.ToString());
</div>

@functions{
    MvcHtmlString AfficherReponsesCommentaire(DataLayer.Model.Commentaires commentaire, StringBuilder sb, int count)
    {
        sb.Append(Html.CommentaireHelper(commentaire.NomCommentaire, commentaire.DateCommentaire.ToShortDateString(), commentaire.Commentaire, count));
        foreach (var comment in commentaire.Commentaires1)
        {
            AfficherReponsesCommentaire(comment, sb, count+1);
        }
        return new MvcHtmlString("");
    }
}

